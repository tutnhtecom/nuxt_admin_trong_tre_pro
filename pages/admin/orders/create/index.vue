<template>
    <div class="content-mp create">

        <v-row>
            <v-col xs="12" sm="12" md="12" lg="8" xl="8">
                <v-card>
                    <v-card-text>
                        <div>
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M14.9759 14.6167C15.5146 14.5099 15.8331 13.9437 15.5468 13.475C14.9876 12.5596 14.1298 11.755 13.0419 11.1373C11.5955 10.3159 9.8232 9.87066 8 9.87066C6.17681 9.87066 4.40455 10.3159 2.95811 11.1373C1.87024 11.755 1.01239 12.5596 0.453174 13.475C0.1669 13.9437 0.485408 14.5099 1.02406 14.6167C5.62985 15.53 10.3702 15.53 14.9759 14.6167Z"
                                    fill="#EB1B24" />
                                <path
                                    d="M12.6009 4.37818C12.6009 6.79613 10.5409 8.75627 7.99966 8.75627C5.45848 8.75627 3.39844 6.79613 3.39844 4.37818C3.39844 1.96022 5.45848 7.74325e-05 7.99966 7.74325e-05C10.5409 7.74325e-05 12.6009 1.96022 12.6009 4.37818Z"
                                    fill="#EB1B24" />
                            </svg>
                            <span>Phụ huynh</span>
                        </div>

                        <div class="mt-2">
                            <v-autocomplete v-model="phu_huynh_id" :disabled="isUpdating" :items="phu_huynh" filled chips
                                color="blue-grey lighten-2" label="" item-text="name" item-value="group">
                                <template v-slot:selection="data">
                                    <div class="d-flex">
                                        <v-avatar left>
                                            <v-img :src="data.item.avatar"></v-img>
                                        </v-avatar>
                                        <div class="ms-2">
                                            <div class="mt-2">
                                                <b>{{ data.item.name }}</b>
                                            </div>
                                            <div>
                                                <span class="blade-id"># {{ data.item.group }}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- <v-chip v-bind="data.attrs" :input-value="data.selected" close @click="data.select"
                                        @click:close="remove(data.item)">
                                        <v-avatar left>
                                            <v-img :src="data.item.avatar"></v-img>
                                        </v-avatar>
                                        {{ data.item.name }}
                                    </v-chip> -->
                                </template>
                                <template v-slot:item="data">
                                    <template v-if="typeof data.item !== 'object'">
                                        <v-list-item-content v-text="data.item"></v-list-item-content>
                                    </template>
                                    <template v-else>
                                        <v-list-item-avatar>
                                            <img :src="data.item.avatar">
                                        </v-list-item-avatar>
                                        <v-list-item-content>
                                            <v-list-item-title v-html="data.item.name"></v-list-item-title>
                                            <v-list-item-subtitle v-html="data.item.group"></v-list-item-subtitle>
                                        </v-list-item-content>
                                    </template>
                                </template>
                            </v-autocomplete>
                        </div>
                    </v-card-text>
                </v-card>
                <!--  -->

                <v-card class="mt-5">
                    <v-card-text>
                        <div>
                            <svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M16.3789 7.85599L16.2471 7.67999C16.0166 7.40799 15.745 7.19199 15.4322 7.03199C15.0124 6.79998 14.5349 6.67999 14.041 6.67999H3.79232C3.29841 6.67999 2.82919 6.79998 2.40114 7.03199C2.08009 7.19999 1.79198 7.43199 1.55325 7.71999C1.08404 8.30399 0.861777 9.02399 0.935864 9.74399L1.24044 13.48C1.34746 14.608 1.4874 16 4.0969 16H13.7447C16.3542 16 16.4859 14.608 16.6011 13.472L16.9057 9.75199C16.9798 9.07999 16.7987 8.40799 16.3789 7.85599ZM10.8882 12.272H6.94513C6.62409 12.272 6.3689 12.016 6.3689 11.712C6.3689 11.408 6.62409 11.152 6.94513 11.152H10.8882C11.2092 11.152 11.4644 11.408 11.4644 11.712C11.4644 12.024 11.2092 12.272 10.8882 12.272Z"
                                    fill="#FC4D32" />
                                <path
                                    d="M15.9502 5.11567C15.998 5.49485 15.586 5.75354 15.2186 5.64842C14.8448 5.54148 14.454 5.48801 14.0495 5.48801H3.79261C3.38281 5.48801 2.97866 5.54563 2.5967 5.65606C2.23401 5.76092 1.8252 5.51186 1.8252 5.13431V3.728C1.8252 0.872001 2.72247 0 5.66125 0H6.63261C7.80976 0 8.1802 0.368001 8.65765 0.968001L9.64547 2.248C9.85127 2.52 9.8595 2.536 10.2217 2.536H12.1809C14.6858 2.536 15.705 3.17082 15.9502 5.11567Z"
                                    fill="#FC4D32" />
                            </svg>
                            <span>Chọn dịch vụ</span>
                        </div>
                        <div class="mt-2">
                            <b-form-select v-model="dich_vu_id" :options="dich_vu" aria-placeholder="Chọn"></b-form-select>
                        </div>


                        <div class="mt-2">
                            <svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M8.92188 0C4.51387 0 0.921875 3.592 0.921875 8C0.921875 12.408 4.51387 16 8.92188 16C13.3299 16 16.9219 12.408 16.9219 8C16.9219 3.592 13.3299 0 8.92188 0ZM12.4019 10.856C12.2899 11.048 12.0899 11.152 11.8819 11.152C11.7779 11.152 11.6739 11.128 11.5779 11.064L9.09788 9.584C8.48188 9.216 8.02588 8.408 8.02588 7.696V4.416C8.02588 4.088 8.29788 3.816 8.62587 3.816C8.95388 3.816 9.22587 4.088 9.22587 4.416V7.696C9.22587 7.984 9.46587 8.408 9.71387 8.552L12.1939 10.032C12.4819 10.2 12.5779 10.568 12.4019 10.856Z"
                                    fill="#00C092" />
                            </svg>
                            <span>Loại lao động</span>
                        </div>
                        <div class="mt-2 d-in">
                            <b-form-group class="" v-slot="{ ariaDescribedby }">
                                <b-form-radio v-for="(item, i) in loai_giao_vien" v-bind:key="i" v-model="loai_giao_vien_id"
                                    :aria-describedby="ariaDescribedby" name="loai_giao_vien" :value="item?.id">{{
                                        item?.name }}</b-form-radio>
                            </b-form-group>
                        </div>

                    </v-card-text>
                </v-card>

                <!-- dia diem -->
                <v-card class="mt-5">
                    <v-card-text>
                        <div>
                            <svg width="17" height="19" viewBox="0 0 17 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M9.27368 18.2848C10.8697 17.4953 16.8504 14.1639 16.8504 8.57813C16.8504 4.33001 13.2847 0.88623 8.88614 0.88623C4.4876 0.88623 0.921875 4.33001 0.921875 8.57813C0.921875 14.1639 6.90258 17.4953 8.4986 18.2848C8.74592 18.4072 9.02637 18.4072 9.27368 18.2848ZM8.8858 11.8747C10.7709 11.8747 12.2991 10.3988 12.2991 8.57815C12.2991 6.75753 10.7709 5.28162 8.8858 5.28162C7.00071 5.28162 5.47254 6.75753 5.47254 8.57815C5.47254 10.3988 7.00071 11.8747 8.8858 11.8747Z"
                                    fill="#4EAEEA" />
                            </svg>
                            <span>Địa điểm</span>
                        </div>
                        <div class="mt-2">
                            <b-form-input id="input-1" v-model="dia_chi" type="text"
                                placeholder="Nhập thông tin rõ số nhà, tầng, tòa, đường..." required></b-form-input>
                        </div>
                    </v-card-text>
                </v-card>

                <!-- thoi gian -->
                <v-card class="mt-5">
                    <v-card-text>
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <svg width="17" height="18" viewBox="0 0 17 18" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M13.1615 2.0945V0.680032C13.1615 0.308281 12.8579 0 12.492 0C12.126 0 11.8224 0.308281 11.8224 0.680032V2.0401H6.02008V0.680032C6.02008 0.308281 5.71657 0 5.35057 0C4.98458 0 4.68107 0.308281 4.68107 0.680032V2.0945C2.27085 2.32118 1.10145 3.78098 0.922916 5.94802C0.905063 6.21096 1.1193 6.42857 1.36925 6.42857H16.4733C16.7321 6.42857 16.9464 6.20189 16.9196 5.94802C16.7411 3.78098 15.5717 2.32118 13.1615 2.0945Z"
                                        fill="#FFB761" />
                                    <path
                                        d="M16.033 7.55353H1.81076C1.32188 7.55353 0.921875 7.93417 0.921875 8.39939V13.6099C0.921875 16.1475 2.25521 17.8392 5.36632 17.8392H12.4774C15.5885 17.8392 16.9219 16.1475 16.9219 13.6099V8.39939C16.9219 7.93417 16.5219 7.55353 16.033 7.55353ZM6.44187 14.6334C6.39743 14.6672 6.35299 14.7095 6.30854 14.7349C6.25521 14.7688 6.20188 14.7941 6.14854 14.811C6.09521 14.8364 6.04187 14.8533 5.98854 14.8618C5.92632 14.8703 5.87299 14.8787 5.81076 14.8787C5.69521 14.8787 5.57965 14.8533 5.47299 14.811C5.35743 14.7688 5.26854 14.7095 5.17965 14.6334C5.01965 14.4727 4.92188 14.2528 4.92188 14.0329C4.92188 13.8129 5.01965 13.593 5.17965 13.4323C5.26854 13.3562 5.35743 13.2969 5.47299 13.2547C5.63299 13.187 5.81076 13.1701 5.98854 13.2039C6.04187 13.2124 6.09521 13.2293 6.14854 13.2547C6.20188 13.2716 6.25521 13.2969 6.30854 13.3308C6.35299 13.3646 6.39743 13.3985 6.44187 13.4323C6.60188 13.593 6.69965 13.8129 6.69965 14.0329C6.69965 14.2528 6.60188 14.4727 6.44187 14.6334ZM6.44187 11.6729C6.27299 11.8251 6.04187 11.9182 5.81076 11.9182C5.57965 11.9182 5.34854 11.8251 5.17965 11.6729C5.01965 11.5122 4.92188 11.2922 4.92188 11.0723C4.92188 10.8524 5.01965 10.6325 5.17965 10.4718C5.42854 10.2349 5.81965 10.1588 6.14854 10.2941C6.2641 10.3364 6.36188 10.3956 6.44187 10.4718C6.60188 10.6325 6.69965 10.8524 6.69965 11.0723C6.69965 11.2922 6.60188 11.5122 6.44187 11.6729ZM9.55299 14.6334C9.3841 14.7857 9.15299 14.8787 8.92188 14.8787C8.69076 14.8787 8.45965 14.7857 8.29076 14.6334C8.13076 14.4727 8.03299 14.2528 8.03299 14.0329C8.03299 13.8129 8.13076 13.593 8.29076 13.4323C8.61965 13.1193 9.2241 13.1193 9.55299 13.4323C9.71299 13.593 9.81076 13.8129 9.81076 14.0329C9.81076 14.2528 9.71299 14.4727 9.55299 14.6334ZM9.55299 11.6729C9.50854 11.7067 9.4641 11.7406 9.41965 11.7744C9.36632 11.8082 9.31299 11.8336 9.25965 11.8505C9.20632 11.8759 9.15299 11.8928 9.09965 11.9013C9.03743 11.9097 8.9841 11.9182 8.92188 11.9182C8.69076 11.9182 8.45965 11.8251 8.29076 11.6729C8.13076 11.5122 8.03299 11.2922 8.03299 11.0723C8.03299 10.8524 8.13076 10.6325 8.29076 10.4718C8.37076 10.3956 8.46854 10.3364 8.5841 10.2941C8.91299 10.1588 9.3041 10.2349 9.55299 10.4718C9.71299 10.6325 9.81076 10.8524 9.81076 11.0723C9.81076 11.2922 9.71299 11.5122 9.55299 11.6729ZM12.6641 14.6334C12.4952 14.7857 12.2641 14.8787 12.033 14.8787C11.8019 14.8787 11.5708 14.7857 11.4019 14.6334C11.2419 14.4727 11.1441 14.2528 11.1441 14.0329C11.1441 13.8129 11.2419 13.593 11.4019 13.4323C11.7308 13.1193 12.3352 13.1193 12.6641 13.4323C12.8241 13.593 12.9219 13.8129 12.9219 14.0329C12.9219 14.2528 12.8241 14.4727 12.6641 14.6334ZM12.6641 11.6729C12.6197 11.7067 12.5752 11.7406 12.5308 11.7744C12.4774 11.8082 12.4241 11.8336 12.3708 11.8505C12.3174 11.8759 12.2641 11.8928 12.2108 11.9013C12.1485 11.9097 12.0863 11.9182 12.033 11.9182C11.8019 11.9182 11.5708 11.8251 11.4019 11.6729C11.2419 11.5122 11.1441 11.2922 11.1441 11.0723C11.1441 10.8524 11.2419 10.6325 11.4019 10.4718C11.4908 10.3956 11.5797 10.3364 11.6952 10.2941C11.8552 10.2265 12.033 10.2095 12.2108 10.2434C12.2641 10.2518 12.3174 10.2688 12.3708 10.2941C12.4241 10.311 12.4774 10.3364 12.5308 10.3703C12.5752 10.4041 12.6197 10.4379 12.6641 10.4718C12.8241 10.6325 12.9219 10.8524 12.9219 11.0723C12.9219 11.2922 12.8241 11.5122 12.6641 11.6729Z"
                                        fill="#FFB761" />
                                </svg>
                                <span>Thời gian</span>
                            </div>
                            <div>
                                <v-dialog ref="dialog" v-model="modal" :return-value.sync="date" persistent width="290px">
                                    <template v-slot:activator="{ on, attrs }">
                                        <v-text-field v-model="date" label=""
                                            prepend-icon="mdi-calendar" readonly v-bind="attrs" v-on="on"></v-text-field>
                                    </template>
                                    <v-date-picker v-model="date" scrollable>
                                        <v-spacer></v-spacer>
                                        <v-btn text color="primary" @click="modal = false">
                                            Cancel
                                        </v-btn>
                                        <v-btn text color="primary" @click="$refs.dialog.save(date)">
                                            OK
                                        </v-btn>
                                    </v-date-picker>
                                </v-dialog>
                            </div>
                        </div>
                        <div class="mt-2">
                            <div class="d-flex align-items-center list-day">
                                <span v-for="(item, n) in days" v-bind:key="n" @click="handleClick(item?.id)"
                                    :class="'day ' + (activeDay(item?.id) === item?.id ? 'active' : '')">
                                    {{ item?.value }}
                                </span>
                            </div>
                        </div>
                    </v-card-text>
                </v-card>

                <!-- chon ca -->
                <v-card class="mt-5">
                    <v-card-text>
                        <div>
                            <svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M8.92188 0C4.51387 0 0.921875 3.592 0.921875 8C0.921875 12.408 4.51387 16 8.92188 16C13.3299 16 16.9219 12.408 16.9219 8C16.9219 3.592 13.3299 0 8.92188 0ZM12.4019 10.856C12.2899 11.048 12.0899 11.152 11.8819 11.152C11.7779 11.152 11.6739 11.128 11.5779 11.064L9.09788 9.584C8.48188 9.216 8.02588 8.408 8.02588 7.696V4.416C8.02588 4.088 8.29788 3.816 8.62587 3.816C8.95388 3.816 9.22587 4.088 9.22587 4.416V7.696C9.22587 7.984 9.46587 8.408 9.71387 8.552L12.1939 10.032C12.4819 10.2 12.5779 10.568 12.4019 10.856Z"
                                    fill="#00C092" />
                            </svg>
                            <span>Chọn ca</span>
                        </div>
                        <div class="mt-2 d-in">
                            <b-form-group class="" v-slot="{ ariaDescribedby }">
                                <b-form-radio v-for="(item, i) in chon_ca" v-bind:key="i" v-model="chon_ca_id"
                                    :aria-describedby="ariaDescribedby" name="chon_ca" :value="item?.id">{{
                                        item?.name }}</b-form-radio>
                            </b-form-group>
                        </div>
                        <div class="mb-3">
                            <b-form-select v-model="khung_gio" :options="khung_gios"></b-form-select>
                        </div>


                        <!-- <div v-html="content">

                        </div> -->
                    </v-card-text>
                </v-card>

                <!-- chon giao vien -->
                <v-card class="mt-5 d-in">
                    <v-card-text>
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <svg width="17" height="16" viewBox="0 0 17 16" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M13.1152 10.4356C13.6968 10.0508 14.4607 10.4706 14.4607 11.1702V12.2984C14.4607 13.4091 13.6013 14.5985 12.5683 14.9483L9.79903 15.8754C9.31289 16.0415 8.52293 16.0415 8.04547 15.8754L5.27624 14.9483C4.23452 14.5985 3.38379 13.4091 3.38379 12.2984V11.1615C3.38379 10.4706 4.14771 10.0508 4.72066 10.4269L6.50894 11.5988C7.19474 12.0623 8.06283 12.2897 8.93093 12.2897C9.79903 12.2897 10.6671 12.0623 11.3529 11.5988L13.1152 10.4356Z"
                                        fill="#FC4D32" />
                                    <path
                                        d="M15.7164 3.57769L10.6226 0.426918C9.7042 -0.142306 8.19052 -0.142306 7.27211 0.426918L2.1528 3.57769C0.511565 4.57985 0.511565 6.84872 2.1528 7.8589L3.51342 8.69269L7.27211 11.0017C8.19052 11.5709 9.7042 11.5709 10.6226 11.0017L14.3558 8.69269L15.5208 7.97114V10.4244C15.5208 10.7531 15.81 11.0257 16.1586 11.0257C16.5073 11.0257 16.7964 10.7531 16.7964 10.4244V6.47993C17.1366 5.44571 16.7879 4.24312 15.7164 3.57769Z"
                                        fill="#FC4D32" />
                                </svg>
                                <span>Chọn giáo viên</span>
                            </div>
                            <div v-if="teacher_id != ''">
                                <span>
                                    Đã chọn {{ teacher?.id }}
                                </span>
                            </div>
                        </div>
                        <div class="mt-4">
                            <button class="btn-gan" v-b-modal.my-modal-teacher>Gán giáo viên</button>
                        </div>
                    </v-card-text>
                </v-card>

                <b-modal id="my-modal-teacher" ref="my-modal-teacher" hide-footer centered title="Điều giáo viên">
                    <template #default="{ hide }">
                        <div>
                            <span>Có <b class="text-primary">{{ teachers?.length ?? 0 }}</b> giáo viên nhận lịch</span>
                        </div>
                        <div>

                            <div class="my-2"  style="height: 500px; overflow: auto;">
                                <div v-for="(item, n) in teachers" v-bind:key="n">
                                    <div :class="'card-teacher ' + (teacher_id == item?.id ? ' active' : '')">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div class="d-flex align-items-center">
                                                <div class="me-3 layout-user">
                                                    <img :src="item?.anh_nguoi_dung" alt="">
                                                </div>
                                                <div class="ps-2" style="margin-left: 5px;">
                                                    <div>
                                                        <b-badge pill variant="danger">
                                                            # {{ item?.id }}
                                                        </b-badge>
                                                        <b-badge pill variant="success">
                                                            Đang trống ca
                                                        </b-badge>
                                                    </div>
                                                    <strong>
                                                        <span class="user-name">
                                                            {{ item?.hoten }}
                                                        </span>
                                                    </strong>
                                                    <p class="w-p p-0 m-0">
                                                        {{ item?.trinh_do }}
                                                    </p>
                                                </div>
                                            </div>

                                            <div class="">
                                                <b-button @click="set_teacher(item?.id)" size="sm"
                                                    style="min-width: 130px;padding: 0.325rem 0.75rem !important;"
                                                    :class="'w-100 rounded-pill ' + (teacher_id == item?.id ? 'text-light' : 'text-primary')"
                                                    :variant="teacher_id == item?.id ? 'primary' : 'outline-primary'">
                                                    Chọn
                                                </b-button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- <div class="mt-5">
                                    <b-form-input class="w-100" v-model.lazy="tuKhoa"
                                        placeholder="Gán giáo viên cụ thể"></b-form-input>
                                </div> -->

                            </div>
                            <div class="mt-4 pb-3 d-flex justify-content-between align-items-center w-100">
                                <button type="button" class=" btn-cancel me-1" @click="hide()">Hủy</button>
                                <button type="button" class=" btn-delete ms-1" @click="hide()">Xác nhận</button>
                            </div>
                        </div>

                    </template>
                </b-modal>

                <!-- so luong be -->
                <v-card class="mt-5 d-in">
                    <v-card-text>
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <svg width="17" height="16" viewBox="0 0 17 16" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M6.54224 0C4.45052 0 2.75 1.70052 2.75 3.79224C2.75 5.84404 4.35472 7.50464 6.44643 7.57649C6.5103 7.56851 6.57417 7.56851 6.62208 7.57649C6.63804 7.57649 6.64603 7.57649 6.66199 7.57649C6.66998 7.57649 6.66998 7.57649 6.67796 7.57649C8.72178 7.50464 10.3265 5.84404 10.3345 3.79224C10.3345 1.70052 8.63396 0 6.54224 0Z"
                                        fill="#4EAEEA" />
                                    <path
                                        d="M10.5981 9.70002C8.37063 8.21506 4.73806 8.21506 2.49466 9.70002C1.48073 10.3786 0.921875 11.2968 0.921875 12.2787C0.921875 13.2607 1.48073 14.1709 2.48667 14.8415C3.60438 15.592 5.07338 15.9672 6.54237 15.9672C8.01136 15.9672 9.48036 15.592 10.5981 14.8415C11.604 14.1629 12.1629 13.2528 12.1629 12.2628C12.1549 11.2808 11.604 10.3707 10.5981 9.70002Z"
                                        fill="#4EAEEA" />
                                    <path
                                        d="M15.3165 4.26325C15.4442 5.81208 14.3425 7.1693 12.8176 7.35292C12.8096 7.35292 12.8096 7.35292 12.8016 7.35292H12.7777C12.7298 7.35292 12.6819 7.35292 12.6419 7.36889C11.8675 7.40881 11.157 7.16132 10.6221 6.70625C11.4444 5.97175 11.9154 4.87001 11.8196 3.67246C11.7637 3.02578 11.5402 2.43499 11.2049 1.93202C11.5083 1.78033 11.8595 1.68453 12.2188 1.65259C13.7836 1.51687 15.1807 2.68248 15.3165 4.26325Z"
                                        fill="#4EAEEA" />
                                    <path
                                        d="M16.9133 11.6482C16.8494 12.4226 16.3544 13.0932 15.5241 13.5483C14.7258 13.9874 13.7198 14.195 12.7219 14.171C13.2967 13.6521 13.632 13.0054 13.6959 12.3188C13.7757 11.3289 13.3047 10.3788 12.3626 9.62035C11.8277 9.19722 11.205 8.8619 10.5264 8.61441C12.2908 8.10346 14.5102 8.44675 15.8754 9.5485C16.6099 10.1393 16.9851 10.8818 16.9133 11.6482Z"
                                        fill="#4EAEEA" />
                                </svg>
                                <span>Số lượng bé</span>
                            </div>
                            <div>

                            </div>
                        </div>
                        <div class="mt-2">
                            <b-form-group class="d-flex align-items-center me-3" v-slot="{ ariaDescribedby }">
                                <b-form-radio v-for="i in 5" v-bind:key="i" v-model="so_luong_be"
                                    :aria-describedby="ariaDescribedby" name="so_luong_be" :value="i">{{ i }}</b-form-radio>
                            </b-form-group>
                        </div>
                    </v-card-text>
                </v-card>

                <!-- an trua -->
                <v-card class="mt-5">
                    <v-card-text>
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <svg width="16" height="19" viewBox="0 0 16 19" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <g clip-path="url(#clip0_703_14191)">
                                        <path
                                            d="M0.92167 11.4986C0.929563 10.573 1.10322 9.81401 1.62944 9.17576C2.20302 8.47903 2.95421 8.02514 3.87378 7.89545C4.50262 7.80645 5.12356 7.93359 5.73004 8.11286C6.08918 8.21839 6.4457 8.33282 6.818 8.39003C7.23504 8.45487 7.64286 8.40275 8.05594 8.3468C8.90185 8.23238 9.6754 7.89672 10.4779 7.65007C11.4843 7.34112 12.496 7.2839 13.4931 7.65643C14.714 8.11286 15.4218 9.01302 15.7546 10.2043C16.0322 11.2011 15.9467 12.1839 15.6033 13.1578C15.1586 14.4178 14.5561 15.5951 13.7023 16.6466C13.0656 17.4298 12.3157 18.0871 11.4198 18.5957C10.7042 19.0012 9.98455 19.1373 9.18864 18.8385C8.644 18.6351 8.07568 18.6173 7.51657 18.7927C6.54963 19.0966 5.68794 18.869 4.88413 18.3338C4.00008 17.7451 3.27915 17.0077 2.68715 16.1418C2.03069 15.1819 1.49131 14.1762 1.18215 13.0625C1.12427 12.8565 1.06243 12.6493 1.02691 12.4395C0.967714 12.0873 0.913776 11.7338 0.92167 11.4986Z"
                                            fill="#FFA02F" />
                                        <path
                                            d="M7.23558 4.54412C7.18164 3.64396 7.65788 2.86331 8.51299 2.25558C9.36679 1.64784 10.2916 1.16725 11.248 0.732422C11.8321 0.467968 12.4294 0.237842 13.0306 0.0166164C13.1122 -0.0138975 13.1714 -0.00881187 13.2201 0.0751014C13.6239 0.760393 13.9239 1.48383 14.041 2.26702C14.2488 3.66812 13.7792 4.79459 12.5662 5.62863C11.7769 6.17153 10.9152 6.57584 10.0219 6.92548C9.37073 7.18103 8.69059 7.35649 8.01439 7.54338C7.92493 7.56754 7.88941 7.55355 7.85652 7.46964C7.50659 6.57202 7.23163 5.65915 7.23295 4.54539L7.23558 4.54412Z"
                                            fill="#FFA02F" />
                                        <path
                                            d="M7.16928 7.65893C6.97853 7.67928 6.7904 7.59918 6.60754 7.49746C5.30382 6.7753 3.99747 6.0595 2.65165 5.41235C2.47932 5.3297 2.48063 5.33225 2.63324 5.22418C3.0358 4.93811 3.50019 4.81351 3.98826 4.75375C4.08824 4.74104 4.17902 4.78681 4.26979 4.82495C5.49195 5.32843 6.39968 6.18791 7.17455 7.19868C7.25611 7.30421 7.33373 7.41355 7.41003 7.52162C7.43108 7.55086 7.47712 7.57756 7.45871 7.6157C7.43897 7.65639 7.38898 7.6602 7.34425 7.6602C7.29558 7.6602 7.24559 7.6602 7.16928 7.6602V7.65893Z"
                                            fill="#FFA02F" />
                                    </g>
                                    <defs>
                                        <clipPath id="clip0_703_14191">
                                            <rect width="15" height="19" fill="white" transform="translate(0.921875)" />
                                        </clipPath>
                                    </defs>
                                </svg>
                                <span>Ăn trưa (với ca cả ngày)</span>
                            </div>
                            <div>

                            </div>
                        </div>
                        <div class="mt-2">
                            <b-form-group class="" v-slot="{ ariaDescribedby }">
                                <b-form-radio v-for="(item, i) in an_trua" v-bind:key="i" v-model="an_trua_id"
                                    :aria-describedby="ariaDescribedby" name="an_trua" :value="item?.id">{{
                                        item?.tieu_De }}</b-form-radio>
                            </b-form-group>
                        </div>
                    </v-card-text>
                </v-card>


                <!-- them gio -->
                <v-card class="mt-5 ">
                    <v-card-text>
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <svg width="17" height="16" viewBox="0 0 17 16" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M8.92188 0C4.51387 0 0.921875 3.592 0.921875 8C0.921875 12.408 4.51387 16 8.92188 16C13.3299 16 16.9219 12.408 16.9219 8C16.9219 3.592 13.3299 0 8.92188 0ZM12.4019 10.856C12.2899 11.048 12.0899 11.152 11.8819 11.152C11.7779 11.152 11.6739 11.128 11.5779 11.064L9.09788 9.584C8.48188 9.216 8.02588 8.408 8.02588 7.696V4.416C8.02588 4.088 8.29788 3.816 8.62587 3.816C8.95388 3.816 9.22587 4.088 9.22587 4.416V7.696C9.22587 7.984 9.46587 8.408 9.71387 8.552L12.1939 10.032C12.4819 10.2 12.5779 10.568 12.4019 10.856Z"
                                        fill="#00C092" />
                                </svg>
                                <span>Thêm giờ</span>
                            </div>
                            <div>

                            </div>
                        </div>
                        <div class="mt-2">
                            <b-form-group class="" v-slot="{ ariaDescribedby }">
                                <b-form-radio v-for="(item, i) in them_gio" v-bind:key="i" v-model="them_gio_id"
                                    :aria-describedby="ariaDescribedby" name="them_gio" :value="item?.id">{{
                                        item?.tieu_De }}</b-form-radio>
                            </b-form-group>
                        </div>
                    </v-card-text>
                </v-card>


                <!-- chon buoi -->

                <div class="mt-5">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <div>
                            <svg width="17" height="18" viewBox="0 0 17 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M13.1615 2.0945V0.680032C13.1615 0.308281 12.8579 0 12.492 0C12.126 0 11.8224 0.308281 11.8224 0.680032V2.0401H6.02008V0.680032C6.02008 0.308281 5.71657 0 5.35057 0C4.98458 0 4.68107 0.308281 4.68107 0.680032V2.0945C2.27085 2.32118 1.10145 3.78098 0.922916 5.94802C0.905063 6.21096 1.1193 6.42857 1.36925 6.42857H16.4733C16.7321 6.42857 16.9464 6.20189 16.9196 5.94802C16.7411 3.78098 15.5717 2.32118 13.1615 2.0945Z"
                                    fill="#0056B1" />
                                <path
                                    d="M16.033 7.55347H1.81076C1.32188 7.55347 0.921875 7.93411 0.921875 8.39933V13.6099C0.921875 16.1475 2.25521 17.8392 5.36632 17.8392H12.4774C15.5885 17.8392 16.9219 16.1475 16.9219 13.6099V8.39933C16.9219 7.93411 16.5219 7.55347 16.033 7.55347ZM6.44187 14.6334C6.39743 14.6672 6.35299 14.7095 6.30854 14.7349C6.25521 14.7687 6.20188 14.7941 6.14854 14.811C6.09521 14.8364 6.04187 14.8533 5.98854 14.8617C5.92632 14.8702 5.87299 14.8787 5.81076 14.8787C5.69521 14.8787 5.57965 14.8533 5.47299 14.811C5.35743 14.7687 5.26854 14.7095 5.17965 14.6334C5.01965 14.4726 4.92188 14.2527 4.92188 14.0328C4.92188 13.8129 5.01965 13.5929 5.17965 13.4322C5.26854 13.3561 5.35743 13.2969 5.47299 13.2546C5.63299 13.1869 5.81076 13.17 5.98854 13.2038C6.04187 13.2123 6.09521 13.2292 6.14854 13.2546C6.20188 13.2715 6.25521 13.2969 6.30854 13.3307C6.35299 13.3646 6.39743 13.3984 6.44187 13.4322C6.60188 13.5929 6.69965 13.8129 6.69965 14.0328C6.69965 14.2527 6.60188 14.4726 6.44187 14.6334ZM6.44187 11.6728C6.27299 11.8251 6.04187 11.9181 5.81076 11.9181C5.57965 11.9181 5.34854 11.8251 5.17965 11.6728C5.01965 11.5121 4.92188 11.2922 4.92188 11.0723C4.92188 10.8523 5.01965 10.6324 5.17965 10.4717C5.42854 10.2349 5.81965 10.1587 6.14854 10.2941C6.2641 10.3364 6.36188 10.3956 6.44187 10.4717C6.60188 10.6324 6.69965 10.8523 6.69965 11.0723C6.69965 11.2922 6.60188 11.5121 6.44187 11.6728ZM9.55299 14.6334C9.3841 14.7856 9.15299 14.8787 8.92188 14.8787C8.69076 14.8787 8.45965 14.7856 8.29076 14.6334C8.13076 14.4726 8.03299 14.2527 8.03299 14.0328C8.03299 13.8129 8.13076 13.5929 8.29076 13.4322C8.61965 13.1193 9.2241 13.1193 9.55299 13.4322C9.71299 13.5929 9.81076 13.8129 9.81076 14.0328C9.81076 14.2527 9.71299 14.4726 9.55299 14.6334ZM9.55299 11.6728C9.50854 11.7067 9.4641 11.7405 9.41965 11.7743C9.36632 11.8082 9.31299 11.8335 9.25965 11.8505C9.20632 11.8758 9.15299 11.8928 9.09965 11.9012C9.03743 11.9097 8.9841 11.9181 8.92188 11.9181C8.69076 11.9181 8.45965 11.8251 8.29076 11.6728C8.13076 11.5121 8.03299 11.2922 8.03299 11.0723C8.03299 10.8523 8.13076 10.6324 8.29076 10.4717C8.37076 10.3956 8.46854 10.3364 8.5841 10.2941C8.91299 10.1587 9.3041 10.2349 9.55299 10.4717C9.71299 10.6324 9.81076 10.8523 9.81076 11.0723C9.81076 11.2922 9.71299 11.5121 9.55299 11.6728ZM12.6641 14.6334C12.4952 14.7856 12.2641 14.8787 12.033 14.8787C11.8019 14.8787 11.5708 14.7856 11.4019 14.6334C11.2419 14.4726 11.1441 14.2527 11.1441 14.0328C11.1441 13.8129 11.2419 13.5929 11.4019 13.4322C11.7308 13.1193 12.3352 13.1193 12.6641 13.4322C12.8241 13.5929 12.9219 13.8129 12.9219 14.0328C12.9219 14.2527 12.8241 14.4726 12.6641 14.6334ZM12.6641 11.6728C12.6197 11.7067 12.5752 11.7405 12.5308 11.7743C12.4774 11.8082 12.4241 11.8335 12.3708 11.8505C12.3174 11.8758 12.2641 11.8928 12.2108 11.9012C12.1485 11.9097 12.0863 11.9181 12.033 11.9181C11.8019 11.9181 11.5708 11.8251 11.4019 11.6728C11.2419 11.5121 11.1441 11.2922 11.1441 11.0723C11.1441 10.8523 11.2419 10.6324 11.4019 10.4717C11.4908 10.3956 11.5797 10.3364 11.6952 10.2941C11.8552 10.2264 12.033 10.2095 12.2108 10.2433C12.2641 10.2518 12.3174 10.2687 12.3708 10.2941C12.4241 10.311 12.4774 10.3364 12.5308 10.3702C12.5752 10.404 12.6197 10.4379 12.6641 10.4717C12.8241 10.6324 12.9219 10.8523 12.9219 11.0723C12.9219 11.2922 12.8241 11.5121 12.6641 11.6728Z"
                                    fill="#0056B1" />
                            </svg>

                            <span>Chọn buổi</span>
                        </div>
                        <div>

                        </div>
                    </div>

                    <div v-if="buoi_hoc?.length > 0">
                        <v-card v-for="(item, n) in buoi_hoc" v-bind:key="n"
                            :class="'mt-5' + (item?.id == goi_hoc_phi_id ? ' card-active' : '')">
                            <v-card-text :class="(item?.id == goi_hoc_phi_id ? ' card-active' : '')">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <div>
                                            <svg width="17" height="16" viewBox="0 0 17 16" fill="none"
                                                xmlns="http://www.w3.org/2000/svg">
                                                <path
                                                    d="M11.4415 1.33337H6.40155C3.88155 1.33337 3.25488 2.00671 3.25488 4.69337V12.2C3.25488 13.9734 4.22822 14.3934 5.40822 13.1267L5.41488 13.12C5.96155 12.54 6.79488 12.5867 7.26822 13.22L7.94155 14.12C8.48155 14.8334 9.35488 14.8334 9.89488 14.12L10.5682 13.22C11.0482 12.58 11.8815 12.5334 12.4282 13.12C13.6149 14.3867 14.5815 13.9667 14.5815 12.1934V4.69337C14.5882 2.00671 13.9615 1.33337 11.4415 1.33337ZM10.8149 6.66004L10.4815 7.00004H10.4749L8.45488 9.02004C8.36822 9.10671 8.18822 9.20004 8.06155 9.21337L7.16155 9.34671C6.83488 9.39337 6.60822 9.16004 6.65488 8.84004L6.78155 7.93337C6.80155 7.80671 6.88822 7.63337 6.97488 7.54004L9.00155 5.52004L9.33488 5.18004C9.55488 4.96004 9.80155 4.80004 10.0682 4.80004C10.2949 4.80004 10.5415 4.90671 10.8149 5.18004C11.4149 5.78004 11.2215 6.25337 10.8149 6.66004Z"
                                                    fill="#2D2D2D" />
                                            </svg>
                                            <span>{{ item?.so_buoi }} Buổi</span>
                                        </div>
                                        <div>
                                            <b class="text-secondary text-decoration-line-through me-2">{{
                                                formatCurrency(item?.tong_tien) }}</b>
                                            <b class="text-danger">{{ formatCurrency(item?.thanh_tien) }}</b>
                                            <sup>
                                                <b class="ms-1 text-secondary">
                                                    ( {{ item?.khuyen_mai }}% )
                                                </b>
                                            </sup>
                                        </div>
                                    </div>
                                    <div>
                                        <button @click="setBuoi(item?.id)"
                                            class="text-light rounded-pill btn btn-chon">Chọn</button>
                                        <!-- <b-button variant="outline-primary">Button</b-button> -->
                                    </div>
                                </div>
                            </v-card-text>
                        </v-card>
                    </div>

                    <b-alert v-else show variant="warning">Dịch vụ chưa có buổi học nào</b-alert>
                </div>

                <!-- hoc phi -->
                <hr />
                <div>
                    <table class="table">
                        <tbody>
                            <tr>
                                <td>Học phí</td>
                                <td><b>{{ formatCurrency(form?.hocPhi) }}</b></td>
                            </tr>
                            <tr>
                                <td>Phụ cấp</td>
                                <td><b>{{ formatCurrency(form?.phuCap) }}</b></td>
                            </tr>
                            <tr>
                                <td>Tổng</td>
                                <td><b class="text-danger">{{ formatCurrency(form?.tongTien) }}</b></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <hr />
                <!--  -->
                <!-- ghi chu -->
                <v-card class="mt-5">
                    <v-card-text>
                        <div>
                            <svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M12.1219 0H5.72188C2.52188 0 0.921875 1.6 0.921875 4.8V15.2C0.921875 15.64 1.28187 16 1.72188 16H12.1219C15.3219 16 16.9219 14.4 16.9219 11.2V4.8C16.9219 1.6 15.3219 0 12.1219 0ZM8.20987 11.728C8.00987 11.928 7.64188 12.112 7.36988 12.152L5.70587 12.384C5.64188 12.392 5.57788 12.4 5.52187 12.4C5.24188 12.4 4.98588 12.304 4.80187 12.12C4.57787 11.896 4.48187 11.568 4.53787 11.216L4.76988 9.552C4.80988 9.28 4.99388 8.904 5.19388 8.712L8.20987 5.696C8.25787 5.84 8.32188 5.984 8.39388 6.144C8.46588 6.288 8.53788 6.432 8.61788 6.568C8.68188 6.68 8.75388 6.792 8.81787 6.872C8.89787 6.992 8.97788 7.096 9.03388 7.152C9.06588 7.2 9.09787 7.232 9.10588 7.248C9.28187 7.448 9.46587 7.64 9.64188 7.784C9.68987 7.832 9.72188 7.856 9.72988 7.864C9.83388 7.944 9.92988 8.032 10.0259 8.088C10.1299 8.168 10.2419 8.24 10.3539 8.304C10.4899 8.384 10.6339 8.464 10.7859 8.536C10.9379 8.608 11.0819 8.664 11.2259 8.712L8.20987 11.728ZM12.5619 7.384L11.9379 8.008C11.8979 8.048 11.8419 8.072 11.7859 8.072C11.7699 8.072 11.7379 8.072 11.7219 8.064C10.3459 7.672 9.24988 6.576 8.85788 5.2C8.83388 5.128 8.85787 5.048 8.91388 4.992L9.54587 4.36C10.5779 3.328 11.5539 3.352 12.5619 4.36C13.0739 4.872 13.3299 5.368 13.3219 5.88C13.3219 6.384 13.0739 6.872 12.5619 7.384Z"
                                    fill="#4EAEEA" />
                            </svg>
                            <span>Ghi chú</span>
                        </div>
                        <div class="mt-2">
                            <b-form-textarea id="textarea" v-model="ghi_chu" placeholder="Nhập ghi chú..." rows="3"
                                max-rows="6"></b-form-textarea>
                        </div>
                    </v-card-text>
                </v-card>

                <!--  -->

                <div class="mt-8" @click="send_data()">
                    <button-component>Lưu thay đổi</button-component>
                </div>
            </v-col>
        </v-row>

    </div>
</template>

<script>
import api from '@/store/axios'
import Swal from 'sweetalert2'
import toastr from 'toastr';
import ButtonComponent from '~/components/button/ButtonComponent.vue'

export default {
    layout: 'admin',
    data() {
        const srcs = {
            1: 'https://cdn.vuetifyjs.com/images/lists/1.jpg',
            2: 'https://cdn.vuetifyjs.com/images/lists/2.jpg',
            3: 'https://cdn.vuetifyjs.com/images/lists/3.jpg',
            4: 'https://cdn.vuetifyjs.com/images/lists/4.jpg',
            5: 'https://cdn.vuetifyjs.com/images/lists/5.jpg',
        }

        return {
            title: {
                name: 'Tạo đơn hàng',
                previous: '/admin/orders'
            },
            days: [
                { id: 2, value: 'T2' },
                { id: 3, value: 'T3' },
                { id: 4, value: 'T4' },
                { id: 5, value: 'T5' },
                { id: 6, value: 'T6' },
                { id: 7, value: 'T7' },
                { id: 1, value: 'CN' },
            ],
            selectedDays: [2,3,4,5,6],
            ghi_chu: null,
            dia_chi: null,
            dich_vu_id: null,
            dich_vu: null,
            phu_huynh_id: null,
            phu_huynh: [],
            data: null,
            file: null,
            image: null,
            autoUpdate: true,
            friends: 'Sandra Adams',
            isUpdating: false,
            name: 'Midnight Crew',
            people: [
                { name: 'Sandra Adams', group: 'Group 1', avatar: srcs[1] },
                { name: 'Ali Connors', group: 'Group 1', avatar: srcs[2] },
                { name: 'Trevor Hansen', group: 'Group 1', avatar: srcs[3] },
                { name: 'Tucker Smith', group: 'Group 1', avatar: srcs[2] },
                { name: 'Britta Holt', group: 'Group 2', avatar: srcs[4] },
                { name: 'Jane Smith ', group: 'Group 2', avatar: srcs[5] },
                { name: 'John Smith', group: 'Group 2', avatar: srcs[1] },
                { name: 'Sandra Williams', group: 'Group 2', avatar: srcs[3] },
            ],
            date: new Date().toISOString().split('T')[0],
            month: 1,
            menu: false,
            modal: false,
            form: null,
            so_luong_be: 1,
            buoi_hoc: [],
            buoi_hoc_id: 1,
            an_trua_id: '',
            an_trua: [],
            goi_hoc_phi: [],
            goi_hoc_phi_id: '',
            them_gio: [],
            them_gio_id: '',
            chon_ca: [],
            chon_ca_id: '',
            teachers: [],
            teacher: '',
            teacher_id: '',
            khung_gio: 1,
            khung_gios: [],
            don_dich_vu_id: null,
            content: '',
            loai_giao_vien: [],
            loai_giao_vien_id: null,
        };
    },
    components: {
        ButtonComponent
    },
    computed: {
        token() {
            const storedUser = JSON.parse(localStorage.getItem('user'));
            return storedUser.auth_key
        }
    },
    methods: {
        set_teacher(id) {
            if (this.teacher_id == id) {
                this.teacher_id = ''
            } else {
                this.teacher_id = id
                this.teacher = this.teachers?.filter(x => x.id !== id);
            }
            console.log(this.teacher_id)
        },
        activeDay(id) {
            if (this.selectedDays.includes(id)) {
                return id;
            }
            return id + 1000;
        },
        handleClick(index) {
            if (this.selectedDays.includes(index)) {
                // Nếu thứ đã được chọn, bỏ chọn
                this.selectedDays = this.selectedDays.filter(day => day !== index);
            } else {
                // Nếu thứ chưa được chọn, thêm vào mảng
                this.selectedDays.push(index);
            }
            console.log(this.selectedDays)
        },
        clearFiles() {
            this.$refs['file-input'].reset()
        },
        async confirm_hoan() {
            const formData = new FormData()
            formData.append('id', this.id)
            formData.append('so_buoi_hoan', this.so_buoi_hoan)
            formData.append('so_tien_hoan', this.so_tien_hoan)

            await api.post('don-dich-vu/hoan-don', formData, {
                'Content-Type': 'multipart/form-data',
                Authorization: 'Bearer ' + this.token
            }).then(res => {
                if (res?.status == 200) {
                    toastr.success(res?.data?.message);
                    this.$refs['my-modal-rollback'].hide()
                    this.so_buoi_hoan = 0
                    this.so_tien_hoan = 0
                    this.load_data();
                }
            })
        },
        async load_form() {
            let url = `don-dich-vu/load-form-tao-don?so_luong_tre=${this.so_luong_be}`;
            if (this.an_trua_id != '') {
                url += `&an_trua_id=${this.an_trua_id}`;
            }
            if (this.them_gio_id != '') {
                url += `&them_gio_id=${this.them_gio_id}`;
            }
            if (this.goi_hoc_phi_id != '') {
                url += `&goi_hoc_phi_id=${this.goi_hoc_phi_id}`;
            }
            await api.get(url, {
                'Content-Type': 'multipart/form-data',
                Authorization: 'Bearer ' + this.token
            }).then(res => {
                this.form = res?.data?.data
                this.an_trua = res?.data?.data?.anTrua ?? []
                // this.an_trua_id = this.an_trua[0]?.value

                this.them_gio = res?.data?.data?.themGio ?? []
                console.log(this.them_gio, res?.data?.data)
                // this.them_gio_id = res?.data?.data?.themGio[0]?.id
            })
        },
        async load_data() {
            await api.get('dich-vu/danh-sach?page=1&limit=1000&sort=1&tuKhoa=', {
                'Content-Type': 'multipart/form-data',
                Authorization: 'Bearer ' + this.token
            }).then(res => {
                this.dich_vu = res?.data?.data.map(item => {
                    return {
                        value: item?.id,
                        text: item?.ten_dich_vu
                    };
                })
                this.dich_vu_id = this.dich_vu[0].value
            })

            await api.get(`don-dich-vu/danh-sach-giao-vien-dang-ranh?trinh_do=`, {
                'Content-Type': 'multipart/form-data',
                Authorization: 'Bearer ' + this.token
            }).then(res => {
                this.teachers = res?.data?.data
            })

            await api.get(`dich-vu/get-ca`, {
                'Content-Type': 'multipart/form-data',
                Authorization: 'Bearer ' + this.token
            }).then(res => {
                this.chon_ca = res?.data?.data
                this.chon_ca_id = res?.data?.data?.[0]?.id ?? 0
            })

            await api.get('don-dich-vu/danh-sach-phu-huynh', {
                'Content-Type': 'multipart/form-data',
                Authorization: 'Bearer ' + this.token
            }).then(res => {
                this.phu_huynh = res?.data?.data.map(item => {
                    return {
                        dien_thoai: item?.dien_thoai,
                        group: item?.id,
                        name: item?.hoten ? (item?.hoten + ' - ' + item?.dien_thoai) : ('Chưa cập nhât tên' + ' - ' + item?.dien_thoai),
                        avatar: item?.anh_nguoi_dung,
                    };
                })
                this.phu_huynh_id = this.phu_huynh[0].group
            })
        },
        async send_data() {
            const formData = new FormData()
            formData.append('phu_huynh_id', this.phu_huynh_id)
            formData.append('dich_vu_id', this.dich_vu_id)
            formData.append('dia_chi', this.dia_chi)

            let dateArray = this.date.split("-");
            let year = dateArray[0];
            let month = dateArray[1];
            let day = dateArray[2];
            // let currentDate = new Date();
            // let day = currentDate.getDate();
            let formattedDate = `${day}/${month}/${year}`;

            formData.append('thoi_gian_bat_dau', formattedDate)
            formData.append('thu', this.selectedDays.join(', '))
            // formData.append('chon_ca_id', this.chon_ca_id)
            formData.append('so_luong_be', this.so_luong_be)
            formData.append('goi_hoc_phi_id', this.goi_hoc_phi_id)

            formData.append('ghi_chu', this.ghi_chu)
            formData.append('hoc_phi', this.goi_hoc_phi_id)
            formData.append('phu_cap', this.goi_hoc_phi_id)
            formData.append('tong_tien', this.goi_hoc_phi_id)
            formData.append('giao_vien_id', this.teacher_id)
            formData.append('an_trua_id', this.an_trua_id)
            formData.append('them_gio_id', this.them_gio_id)
            // formData.append('giao_vien_id', this.teacher_id)
            formData.append('chon_ca_id', this.khung_gio)
            formData.append('loai_giao_vien', this.loai_giao_vien_id)
            formData.append('leader_kd_id', '')

            await api.post('don-dich-vu/tao-don', formData, {
                'Content-Type': 'multipart/form-data',
                Authorization: 'Bearer ' + this.token
            }).then(res => {
                if (res?.status == 200) {
                    toastr.success(res?.data?.message);
                    this.$router.push('/admin/orders');
                }
            })
        },
        remove(item) {
            const index = this.friends.indexOf(item.name)
            if (index >= 0) this.friends.splice(index, 1)
        },
        setBuoi(id) {
            this.goi_hoc_phi_id = id
        }
    },
    mounted() {
        this.$store.dispatch('title/set_title', this.title);
        this.month = this.date.split("-")[1] + '/' + this.date.split("-")[0];
        this.load_form()
        this.load_data()
    },
    watch: {
        isUpdating(val) {
            if (val) {
                setTimeout(() => (this.isUpdating = false), 3000)
            }
        },
        date() {
            console.log(this.date)
            const dateArray = this.date.split("-");
            console.log(dateArray)
            this.month = dateArray[1] + '/' + dateArray[0];
            this.load_data();
        },
        async dich_vu_id() {
            await api.get(`dich-vu/danh-sach-khung-gio-full?dich_vu_id=${this.dich_vu_id}&type=` + this.chon_ca_id, {
                'Content-Type': 'multipart/form-data',
                Authorization: 'Bearer ' + this.token
            }).then(res => {

                this.khung_gios = res?.data?.data?.khungGio?.map(item => {
                    return {
                        value: item?.id,
                        text: item?.khung_gio,
                        content: item?.noi_dung ?? ''
                    };
                })
                this.khung_gio = this.khung_gios[0]?.value ?? 0
                this.khung_gio_target = this.khung_gios[0] ?? 0
            })

            await api.get(`don-dich-vu/get-nhom-nhan-su?dich_vu_id=` + this.dich_vu_id, {
                'Content-Type': 'multipart/form-data',
                Authorization: 'Bearer ' + this.token
            }).then(res => {
                this.loai_giao_vien = res?.data?.data
            })
        },
        async loai_giao_vien_id() {
            await api.get(`don-dich-vu/danh-sach-gia-buoi-hoc?id=${this.dich_vu_id}&page=1&limit=1000&sort=1&khung_gio_id=` + this.khung_gio + `&trinh_do=` + this.loai_giao_vien_id, {
                'Content-Type': 'multipart/form-data',
                Authorization: 'Bearer ' + this.token
            }).then(res => {
                this.buoi_hoc = res?.data?.data
            })
        },
        async khung_gio() {
            // console.log(this.khung_gio_target)
            this.content = this.khung_gio_target?.content

            await api.get(`don-dich-vu/danh-sach-gia-buoi-hoc?id=${this.dich_vu_id}&page=1&limit=1000&sort=1&khung_gio_id=` + this.khung_gio + `&trinh_do=` + this.loai_giao_vien_id, {
                'Content-Type': 'multipart/form-data',
                Authorization: 'Bearer ' + this.token
            }).then(res => {
                this.buoi_hoc = res?.data?.data
            })
        },
        async chon_ca_id() {
            console.log(this.selected)
            await api.get(`dich-vu/danh-sach-khung-gio-full?dich_vu_id=${this.dich_vu_id}&type=` + this.chon_ca_id, {
                'Content-Type': 'multipart/form-data',
                Authorization: 'Bearer ' + this.token
            }).then(res => {

                this.khung_gios = res?.data?.data?.khungGio?.map(item => {
                    return {
                        value: item?.id,
                        text: item?.khung_gio,
                        content: item?.noi_dung ?? ''
                    };
                })
                this.khung_gio = this.khung_gios[0]?.value ?? 0
            })
        },
        so_luong_be() {
            this.load_form()
        },
        goi_hoc_phi_id() {
            this.load_form()
        },
        an_trua_id() {
            this.load_form()
        }
        ,
        so_luong_tre() {
            this.load_form()
        }
        ,
        them_gio_id() {
            this.load_form()
        }
    },
}
</script>

<style lang="scss" scoped>
.btn-chon {
    border-radius: 46px;
    opacity: 0.5;
    background: #0056B1;
    padding: 8px 37px;
}

.card-active {
    .btn-chon {
        border-radius: 46px;
        opacity: 1 !important;
        background: #0056B1;
        padding: 8px 37px;
    }
}


.blade-id {
    border-radius: 17px;
    background: #FFEEEB;
    padding: 3px 4px;
    color: #FC4D32;
    font-family: SVN-Gilroy;
    font-size: 12px;
    font-style: normal;
    font-weight: 500;
    line-height: normal;
}

// .custom-radio {
//     margin-right: 25px;
//     display: inline;
// }

span {
    color: #2D2D2D;
    font-family: SVN-Gilroy;
    font-size: 14px;
    font-style: normal;
    margin-left: 5px;
    font-weight: 700;
    line-height: normal;
}

.btn-gan {
    cursor: pointer;
    border-radius: 46px;
    background: #E6EFF8;
    display: flex;
    width: 100%;
    padding: 12px 32px;
    justify-content: center;
    align-items: center;
    gap: 10px;
    flex-shrink: 0;
    color: #0056B1;
    text-align: center;
    font-family: SVN-Gilroy;
    font-size: 14px;
    font-style: normal;
    font-weight: 500;
    line-height: normal;
}

.card-teacher {
    border-radius: 10px;
    background: #FFF;
    border: 1px solid #c9c8c8;
    padding: 10px;
    margin-bottom: 10px;
}

.card-teacher.active {
    border-radius: 10px;
    border: 1px solid #4EAEEA;

    background: #E7F6FF;
}
</style>